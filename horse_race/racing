#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

const int NUM_HORSES = 5;   // Number of horses
const int TRACK_LENGTH = 15; // Length of the track

void advance(int horseNum, int* horses) {
    if (rand() % 2 == 1) { // Random coin flip (0 or 1)
        horses[horseNum]++;
    }
}

void printLane(int horseNum, int* horses) {
    for (int i = 0; i < TRACK_LENGTH; i++) {
        if (i == horses[horseNum]) {
            cout << horseNum;
        } else {
            cout << ".";
        }
    }
    cout << endl;
}

bool isWinner(int horseNum, int* horses) {
    return horses[horseNum] >= TRACK_LENGTH;
}

int main() {
    srand(time(0)); // Seed random number generator

    int horses[NUM_HORSES] = {0}; // Initialize all horse positions to 0
    bool raceOver = false;

    while (!raceOver) {
        system("clear"); // Clear screen (use "cls" on Windows)

        // Advance each horse and print its lane
        for (int i = 0; i < NUM_HORSES; i++) {
            advance(i, horses);
            printLane(i, horses);

            // Check if this horse has won
            if (isWinner(i, horses)) {
                raceOver = true;
            }
        }

        // If the race is over, announce the winner(s)
        if (raceOver) {
            cout << "Horse ";
            for (int i = 0; i < NUM_HORSES; i++) {
                if (isWinner(i, horses)) {
                    cout << i << " ";
                }
            }
            cout << "WINS!!!" << endl;
        } else {
            // Pause until user presses Enter
            cout << "Press Enter for another turn";
            cin.ignore();
        }
    }

    return 0;
}
